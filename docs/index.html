<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>komugi RPG„É©„É≥„Ç≠„É≥„Ç∞</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', 'Segoe UI', 'Meiryo', sans-serif;
      background: #0a0e27;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(120, 0, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 0, 150, 0.1) 0%, transparent 50%),
        linear-gradient(180deg, #0a0e27 0%, #1a1f3a 100%);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }

    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInDown 1s;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: #ffd700;
      text-shadow: 
        0 0 5px rgba(255,215,0,0.5),
        2px 2px 4px rgba(0,0,0,0.8);
      line-height: 1.2;
    }

    .last-update {
      font-size: 0.9rem;
      opacity: 0.8;
      color: #00ffff;
      text-shadow: 0 0 5px #00ffff;
    }

    .tabs {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .tab {
      background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,0,255,0.1));
      border: 2px solid #ffd700;
      padding: 18px 40px;
      border-radius: 0;
      color: #ffd700;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s;
      text-transform: uppercase;
      position: relative;
      box-shadow: 
        0 0 10px rgba(255,215,0,0.3),
        inset 0 0 10px rgba(255,215,0,0.1);
      clip-path: polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%);
    }

    .tab:hover {
      background: linear-gradient(135deg, rgba(255,215,0,0.3), rgba(255,0,255,0.3));
      box-shadow: 
        0 0 20px rgba(255,215,0,0.6),
        inset 0 0 20px rgba(255,215,0,0.2);
      transform: translateY(-3px);
    }

    .tab.active {
      background: linear-gradient(135deg, #ffd700, #ff00ff);
      color: #000;
      font-weight: bold;
      box-shadow: 
        0 0 30px rgba(255,215,0,0.8),
        inset 0 0 20px rgba(255,255,255,0.2);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 30px rgba(255,215,0,0.8); }
      50% { box-shadow: 0 0 50px rgba(255,0,255,0.8); }
    }

    .ranking-card {
      background: linear-gradient(135deg, rgba(20,30,70,0.8), rgba(40,20,60,0.8));
      backdrop-filter: blur(10px);
      border: 3px solid #ffd700;
      border-radius: 0;
      padding: 30px;
      box-shadow: 
        0 0 40px rgba(255,215,0,0.4),
        inset 0 0 30px rgba(255,0,255,0.1);
      position: relative;
      clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);
    }

    .ranking-card::before {
      content: '‚öîÔ∏è HALL OF LEGENDS ‚öîÔ∏è';
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(90deg, #000, #1a1f3a, #000);
      padding: 5px 20px;
      border: 2px solid #ffd700;
      font-size: 0.6rem;
      color: #ffd700;
      text-shadow: 0 0 10px #ffd700;
    }

    .ranking-item {
      display: flex;
      align-items: center;
      padding: 20px;
      margin-bottom: 15px;
      background: linear-gradient(90deg, rgba(255,215,0,0.05), rgba(255,0,255,0.05));
      border: 2px solid rgba(255,215,0,0.3);
      border-left: 5px solid #ffd700;
      transition: all 0.3s;
      position: relative;
      clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 0 100%);
    }

    .ranking-item:hover {
      background: linear-gradient(90deg, rgba(255,215,0,0.15), rgba(255,0,255,0.15));
      border-color: #ffd700;
      transform: translateX(10px) scale(1.02);
      box-shadow: 
        0 0 20px rgba(255,215,0,0.5),
        inset 0 0 20px rgba(255,0,255,0.2);
    }

    .rank {
      font-size: 1.8rem;
      font-weight: bold;
      width: 80px;
      text-align: center;
      text-shadow: 0 0 10px currentColor;
    }

    .rank-1 { 
      color: #ffd700;
      animation: rankGlow 2s infinite;
    }
    .rank-2 { 
      color: #c0c0c0;
      text-shadow: 0 0 10px #c0c0c0;
    }
    .rank-3 { 
      color: #cd7f32;
      text-shadow: 0 0 10px #cd7f32;
    }

    @keyframes rankGlow {
      0%, 100% { text-shadow: 0 0 10px #ffd700, 0 0 20px #ffd700; }
      50% { text-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700, 0 0 60px #ff00ff; }
    }

    .player-name {
      flex: 1;
      font-size: 1rem;
      margin-left: 30px;
      color: #00ffff;
      text-shadow: 0 0 5px #00ffff;
      letter-spacing: 2px;
    }

    .value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #ffd700;
      text-shadow: 
        0 0 10px #ffd700,
        0 0 20px #ff00ff;
      padding: 10px 20px;
      background: rgba(0,0,0,0.5);
      border: 2px solid #ffd700;
      clip-path: polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%);
    }

    .loading {
      text-align: center;
      font-size: 1rem;
      padding: 50px;
      color: #00ffff;
      text-shadow: 0 0 10px #00ffff;
      animation: blink 1.5s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.5rem;
      }
      .tab {
        font-size: 0.5rem;
        padding: 10px 15px;
      }
      .player-name {
        font-size: 0.7rem;
      }
      .value {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="stars" id="stars"></div>
  
  <div class="container">
    <header>
      <h1>üèÜ komugi RPG „É©„É≥„Ç≠„É≥„Ç∞ üèÜ</h1>
      <p class="last-update" id="lastUpdate">Ë™≠„ÅøËæº„Åø‰∏≠...</p>
    </header>

    <div class="tabs">
      <button class="tab active" data-tab="prestige">‚ö° „Éó„É¨„Çπ„ÉÜ„Éº„Ç∏</button>
      <button class="tab" data-tab="attack">‚öîÔ∏è ÊúÄÈ´òÊîªÊíÉÂäõ</button>
      <button class="tab" data-tab="skills">‚ú® „Çπ„Ç≠„É´Êï∞</button>
    </div>

    <div id="content">
      <div class="loading">„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...</div>
    </div>
  </div>

  <script>
    // Êòü„ÇíÁîüÊàê
    const starsContainer = document.getElementById('stars');
    for (let i = 0; i < 100; i++) {
      const star = document.createElement('div');
      star.className = 'star';
      star.style.width = Math.random() * 3 + 'px';
      star.style.height = star.style.width;
      star.style.left = Math.random() * 100 + '%';
      star.style.top = Math.random() * 100 + '%';
      star.style.animationDelay = Math.random() * 3 + 's';
      starsContainer.appendChild(star);
    }

    let rankingData = null;
    let currentTab = 'prestige';

    async function loadRankings() {
      try {
        const response = await fetch('ranking.json?t=' + Date.now());
        rankingData = await response.json();
        
        const updateDate = new Date(rankingData.lastUpdate);
        document.getElementById('lastUpdate').textContent = 
          `ÊúÄÁµÇÊõ¥Êñ∞: ${updateDate.toLocaleString('ja-JP')}`;

        showRanking(currentTab);
      } catch (error) {
        document.getElementById('content').innerHTML = 
          '<div class="loading">‚ùå „Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</div>';
      }
    }

    function showRanking(type) {
      currentTab = type;
      
      const data = rankingData.rankings[type];
      
      let html = '<div class="ranking-card">';
      
      data.forEach((player, index) => {
        const rank = index + 1;
        const rankClass = rank <= 3 ? `rank-${rank}` : '';
        const medal = rank === 1 ? 'üëë' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : '';
        
        html += `
          <div class="ranking-item">
            <div class="rank ${rankClass}">${medal} ${rank}</div>
            <div class="player-name">${player.name}</div>
            <div class="value">${player.value.toLocaleString()}</div>
          </div>
        `;
      });
      
      html += '</div>';
      document.getElementById('content').innerHTML = html;
    }

    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        showRanking(tab.dataset.tab);
      });
    });

    setInterval(loadRankings, 30000);
    loadRankings();
  </script>
</body>
</html>